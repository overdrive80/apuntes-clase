* Ticket 1
- Cliente: Pedro
- Fecha: 4-5-19 11:10
| Producto  | Cantidad | Precio unitario | Total |
|-----------+----------+-----------------+-------|
| Manzanas  |        5 |               2 |    10 |
| Chocolate |        1 |            4.20 |  4.20 |


* Ticket 2
- Cliente: Pedro
- Fecha: 5-5-19 11:10
| Producto  | Cantidad | Precio unitario | Total |
|-----------+----------+-----------------+-------|
| Manzanas  |        3 |               2 |    6 |


* Ticket 3
- Cliente: Susana
- Fecha: 4-5-19 11:20
| Producto  | Cantidad | Precio unitario | Total |
|-----------+----------+-----------------+-------|
| Chocolate |        3 |            4.20 | 12.60 |
| Peras     |        1 |            3.15 | 3.15  |


* Soluci√≥n

#+BEGIN_SRC sql
create table compra(
  cliente varchar(100),
  fechahora timestamp,
  primary key(cliente,fechahora)
);

create table producto(
  nombre varchar(100) primary key,
  precio number(8,2)
);

create table ticket(
  cliente varchar(100),
  fechahora timestamp,
  nombreproducto varchar(100),
  cantidad number(4),
  primary key(cliente,fechahora,nombreproducto),
  foreign key (cliente,fechahora) references compra,
  foreign key (nombreproducto) references producto(nombre)
);
  
  
insert into producto values('Manzanas',2);
insert into producto values('Chocolate',4.20);
insert into producto values('Peras',3.15);


insert into compra values ('Pedro', '04/05/19 11:10:00');
insert into compra values ('Pedro', '05/05/19 11:10:00');
insert into compra values ('Susana','04/05/19 11:20:00');


insert into ticket values( 'Pedro', '04/05/19 11:10:00','Manzanas',5);
insert into ticket values( 'Pedro', '04/05/19 11:10:00','Chocolate',1);

insert into ticket values( 'Pedro', '05/05/19 11:10:00','Manzanas',3);

insert into ticket values( 'Susana','04/05/19 11:20:00','Peras',1);
insert into ticket values( 'Susana','04/05/19 11:20:00','Chocolate',3);
#+END_SRC
